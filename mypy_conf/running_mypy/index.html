
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="hellowac-类型检查">
      
      
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../command_line/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.4">
    
    
      
        <title>运行mypy和管理导入 - mypy类型检查</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.bd3936ea.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
        html.glightbox-open { overflow: initial; height: 100%; }
        .gslide-title { margin-top: 0px; user-select: text; }
        .gslide-desc { color: #666; user-select: text; }
        .gslide-image img { background: white; }
        
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
            </style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="blue">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#运行mypy和管理导入" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
你当前浏览的版本已不是最新版本，
<a href="../../..">
    <strong>点击这里</strong>
</a>查看最新版本的文档

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../.." title="mypy类型检查" class="md-header__button md-logo" aria-label="mypy类型检查" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            mypy类型检查
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              运行mypy和管理导入
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/hellowac/mypy-zh-cn" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    hellowac/myppy-zh-cn
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  欢迎来到mypy文档!

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../mypy/" class="md-tabs__link">
          
  
    
  
  第一步

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../mypy/builtin_types/" class="md-tabs__link">
          
  
    
  
  类型系统参考

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
    
  
  配置和运行mypy

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../mypy_other/" class="md-tabs__link">
          
  
    
  
  其他杂项

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="mypy类型检查" class="md-nav__button md-logo" aria-label="mypy类型检查" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    mypy类型检查
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/hellowac/mypy-zh-cn" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    hellowac/myppy-zh-cn
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    欢迎来到mypy文档!
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../mypy/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    第一步
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            第一步
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mypy/cheat_sheet_py3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    类型提示备忘录
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mypy/existing_code/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    将 mypy 与现有代码库结合使用
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    类型系统参考
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            类型系统参考
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mypy/builtin_types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    内置类型
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mypy/type_inference_type_annotations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    类型推断和类型注解
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mypy/kind_of_types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    类型种类
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mypy/class_basics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    类的基础
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mypy/annotation_issue_at_runtime/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    运行时的注解问题
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mypy/protocol_and_struct_subtyping/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    协议及其子类型
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mypy/dynamic_typing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    动态类型
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mypy/type_narrowing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    类型收缩
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mypy/duck_type_compatibility/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    鸭子类型兼容
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mypy/stub_files/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    存根文件
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mypy/generics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    泛型
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mypy/more_types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    更多类型
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mypy/literal_and_enum/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    字面量和枚举
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mypy/typeddict/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    类型字典
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mypy/final_names_methods_classes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    最终名称、方法和类
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mypy/metaclasses/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    元类
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    配置和运行mypy
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            配置和运行mypy
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    运行mypy和管理导入
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    运行mypy和管理导入
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#指定要检查的代码" class="md-nav__link">
    指定要检查的代码
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#从文件中读取文件列表" class="md-nav__link">
    从文件中读取文件列表
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#映射文件路径到模块" class="md-nav__link">
    映射文件路径到模块
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mypy-如何处理导入" class="md-nav__link">
    mypy 如何处理导入
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#缺失的导入" class="md-nav__link">
    缺失的导入
  </a>
  
    <nav class="md-nav" aria-label="缺失的导入">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#缺失的库存根或-pytyped-标记" class="md-nav__link">
    缺失的库存根或 py.typed 标记
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#库存根未安装" class="md-nav__link">
    库存根未安装
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#无法找到实现或库存根" class="md-nav__link">
    无法找到实现或库存根
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#如何找到导入" class="md-nav__link">
    如何找到导入
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#跟随导入" class="md-nav__link">
    跟随导入
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../command_line/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mypy命令行
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../config_file/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mypy配置文件
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../inline_config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    内联配置
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../mypy_daemon/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mypy服务(守护进程)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../installed_packages/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    使用安装包
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../extending_mypy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    扩展和集成 mypy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../stubgen/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    自动存根生成
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../stubtest/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    自动存根测试
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../mypy_other/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    其他杂项
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            其他杂项
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mypy_other/common_issues/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    常见问题及解决办法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mypy_other/supported_python_features/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    支持的 Python 特性
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mypy_other/error_codes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    错误码
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mypy_other/error_code_list/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    默认启用的错误码
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mypy_other/error_code_list2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    可选检查的错误代码
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mypy_other/additional_features/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    额外特性
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mypy_other/faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    常见问题解答
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/python/mypy" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    项目地址
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="https://mypy-lang.org/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    网页地址
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#指定要检查的代码" class="md-nav__link">
    指定要检查的代码
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#从文件中读取文件列表" class="md-nav__link">
    从文件中读取文件列表
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#映射文件路径到模块" class="md-nav__link">
    映射文件路径到模块
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mypy-如何处理导入" class="md-nav__link">
    mypy 如何处理导入
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#缺失的导入" class="md-nav__link">
    缺失的导入
  </a>
  
    <nav class="md-nav" aria-label="缺失的导入">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#缺失的库存根或-pytyped-标记" class="md-nav__link">
    缺失的库存根或 py.typed 标记
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#库存根未安装" class="md-nav__link">
    库存根未安装
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#无法找到实现或库存根" class="md-nav__link">
    无法找到实现或库存根
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#如何找到导入" class="md-nav__link">
    如何找到导入
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#跟随导入" class="md-nav__link">
    跟随导入
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="运行mypy和管理导入">运行mypy和管理导入<a class="headerlink" href="#运行mypy和管理导入" title="Permanent link">&para;</a></h1>
<p><strong>Running mypy and managing imports</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">中文</label><label for="__tabbed_1_2">英文</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
<div class="tabbed-block"></div>
</div>
</div>
<p>The <a href="../../mypy/">getting-started</a> page should have already introduced you to the basics of how to run mypy -- pass in the files and directories you want to type check via the command line</p>
<div class="language-shell highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>$<span style="color: #bbbbbb"> </span>mypy<span style="color: #bbbbbb"> </span>foo.py<span style="color: #bbbbbb"> </span>bar.py<span style="color: #bbbbbb"> </span>some_directory
</code></pre></div>
<p>This page discusses in more detail how exactly to specify what files you want mypy to type check, how mypy discovers imported modules, and recommendations on how to handle any issues you may encounter along the way.</p>
<p>If you are interested in learning about how to configure the actual way mypy type checks your code, see our <a href="../command_line/">command-line</a> guide.</p>
<h2 id="指定要检查的代码">指定要检查的代码<a class="headerlink" href="#指定要检查的代码" title="Permanent link">&para;</a></h2>
<p><strong>Specifying code to be checked</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">中文</label><label for="__tabbed_2_2">英文</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
<div class="tabbed-block"></div>
</div>
</div>
<p>Mypy lets you specify what files it should type check in several different ways.</p>
<ol>
<li>
<p>First, you can pass in paths to Python files and directories you want to type check. For example</p>
<div class="language-shell highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>$<span style="color: #bbbbbb"> </span>mypy<span style="color: #bbbbbb"> </span>file_1.py<span style="color: #bbbbbb"> </span>foo/file_2.py<span style="color: #bbbbbb"> </span>file_3.pyi<span style="color: #bbbbbb"> </span>some/directory
</code></pre></div>
<p>The above command tells mypy it should type check all of the provided files together. In addition, mypy will recursively type check the entire contents of any provided directories.</p>
<p>For more details about how exactly this is done, see [Mapping file paths to modules <mapping-paths-to-modules>].</p>
</li>
<li>
<p>Second, you can use the <a href="../command_line/#m">-m</a> flag (long form: <a href="../command_line/#m">--module</a>) to specify a module name to be type checked. The name of a module is identical to the name you would use to import that module within a Python program. For example, running</p>
<div class="language-shell highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>$<span style="color: #bbbbbb"> </span>mypy<span style="color: #bbbbbb"> </span>-m<span style="color: #bbbbbb"> </span>html.parser
</code></pre></div>
<p>...will type check the module <code>html.parser</code> (this happens to be a library stub).</p>
<p>Mypy will use an algorithm very similar to the one Python uses to find where modules and imports are located on the file system. For more details, see [finding-imports].</p>
</li>
<li>
<p>Third, you can use the <a href="../command_line/#p">-p</a> (long form: <a href="../command_line/#p">--package</a>) flag to specify a package to be (recursively) type checked. This flag is almost identical to the <a href="../command_line/#m">-m</a> flag except that if you give it a package name, mypy will recursively type check all submodules and subpackages of that package. For example, running</p>
<div class="language-shell highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>$<span style="color: #bbbbbb"> </span>mypy<span style="color: #bbbbbb"> </span>-p<span style="color: #bbbbbb"> </span>html
</code></pre></div>
<p>...will type check the entire <code>html</code> package (of library stubs). In contrast, if we had used the <a href="../command_line/#m">-m</a> flag, mypy would have type checked just <code>html</code>'s <code>__init__.py</code> file and anything imported from there.</p>
<p>Note that we can specify multiple packages and modules on the command line. For example</p>
<div class="language-shell highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>$<span style="color: #bbbbbb"> </span>mypy<span style="color: #bbbbbb"> </span>--package<span style="color: #bbbbbb"> </span>p.a<span style="color: #bbbbbb"> </span>--package<span style="color: #bbbbbb"> </span>p.b<span style="color: #bbbbbb"> </span>--module<span style="color: #bbbbbb"> </span>c
</code></pre></div>
</li>
<li>
<p>Fourth, you can also instruct mypy to directly type check small strings as programs by using the <a href="../command_line/#c">-c</a> (long form: <a href="../command_line/#c">--command</a>) flag. For example</p>
<div class="language-shell highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>$<span style="color: #bbbbbb"> </span>mypy<span style="color: #bbbbbb"> </span>-c<span style="color: #bbbbbb"> </span><span style="color: #BA2121">&#39;x = [1, 2]; print(x())&#39;</span>
</code></pre></div>
<p>...will type check the above string as a mini-program (and in this case,
will report that <code>list[int]</code> is not callable).</p>
</li>
</ol>
<p>You can also use the <a href="../config_file/#files">files</a> option in your <code>mypy.ini</code> file to specify which
files to check, in which case you can simply run <code>mypy</code> with no arguments.</p>
<h2 id="从文件中读取文件列表">从文件中读取文件列表<a class="headerlink" href="#从文件中读取文件列表" title="Permanent link">&para;</a></h2>
<p><strong>Reading a list of files from a file</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">中文</label><label for="__tabbed_3_2">英文</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
<div class="tabbed-block"></div>
</div>
</div>
<p>Finally, any command-line argument starting with <code>@</code> reads additional
command-line arguments from the file following the <code>@</code> character.
This is primarily useful if you have a file containing a list of files
that you want to be type-checked: instead of using shell syntax like</p>
<div class="language-shell highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>$<span style="color: #bbbbbb"> </span>mypy<span style="color: #bbbbbb"> </span><span style="color: #008000; font-weight: bold">$(</span>cat<span style="color: #bbbbbb"> </span>file_of_files.txt<span style="color: #008000; font-weight: bold">)</span>
</code></pre></div>
<p>you can use this instead</p>
<div class="language-shell highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>$<span style="color: #bbbbbb"> </span>mypy<span style="color: #bbbbbb"> </span>@file_of_files.txt
</code></pre></div>
<p>This file can technically also contain any command line flag, not
just file paths. However, if you want to configure many different
flags, the recommended approach is to use a
[configuration file <config-file>] instead.</p>
<h2 id="映射文件路径到模块">映射文件路径到模块<a class="headerlink" href="#映射文件路径到模块" title="Permanent link">&para;</a></h2>
<p><strong>Mapping file paths to modules</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">中文</label><label for="__tabbed_4_2">英文</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
<div class="tabbed-block"></div>
</div>
</div>
<p>One of the main ways you can tell mypy what to type check is by providing mypy a list of paths. For example</p>
<div class="language-shell highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>$<span style="color: #bbbbbb"> </span>mypy<span style="color: #bbbbbb"> </span>file_1.py<span style="color: #bbbbbb"> </span>foo/file_2.py<span style="color: #bbbbbb"> </span>file_3.pyi<span style="color: #bbbbbb"> </span>some/directory
</code></pre></div>
<p>This section describes how exactly mypy maps the provided paths to modules to type check.</p>
<ul>
<li>
<p>Mypy will check all paths provided that correspond to files.</p>
</li>
<li>
<p>Mypy will recursively discover and check all files ending in <code>.py</code> or <code>.pyi</code> in directory paths provided, after accounting for <a href="../command_line/#exclude">--exclude</a>.</p>
</li>
<li>
<p>For each file to be checked, mypy will attempt to associate the file (e.g. <code>project/foo/bar/baz.py</code>) with a fully qualified module name (e.g. <code>foo.bar.baz</code>). The directory the package is in (<code>project</code>) is then added to mypy's module search paths.</p>
</li>
</ul>
<p>How mypy determines fully qualified module names depends on if the options
<a href="../command_line/#no-namespace-packages">--no-namespace-packages</a> and
<a href="../command_line/#explicit-package-bases">--explicit-package-bases</a> are set.</p>
<ol>
<li>
<p>If <a href="../command_line/#no-namespace-packages">--no-namespace-packages</a> is set, mypy will rely solely upon the presence of <code>__init__.py[i]</code> files to determine the fully qualified module name. That is, mypy will crawl up the directory tree for as long as it continues to find <code>__init__.py</code> (or <code>__init__.pyi</code>) files.</p>
<p>For example, if your directory tree consists of <code>pkg/subpkg/mod.py</code>, mypy would require <code>pkg/__init__.py</code> and <code>pkg/subpkg/__init__.py</code> to exist in order correctly associate <code>mod.py</code> with <code>pkg.subpkg.mod</code></p>
</li>
<li>
<p>The default case. If <a href="../command_line/#namespace-packages">--namespace-packages</a> is on, but <a href="../command_line/#explicit-package-bases">--explicit-package-bases</a> is off, mypy will allow for the possibility that
    directories without <code>__init__.py[i]</code> are packages. Specifically, mypy will
    look at all parent directories of the file and use the location of the
    highest <code>__init__.py[i]</code> in the directory tree to determine the top-level
    package.</p>
<p>For example, say your directory tree consists solely of <code>pkg/__init__.py</code>
and <code>pkg/a/b/c/d/mod.py</code>. When determining <code>mod.py</code>'s fully qualified
module name, mypy will look at <code>pkg/__init__.py</code> and conclude that the
associated module name is <code>pkg.a.b.c.d.mod</code>.</p>
</li>
<li>
<p>You'll notice that the above case still relies on <code>__init__.py</code>. If you can't put an <code>__init__.py</code> in your top-level package, but still wish to pass paths (as opposed to packages or modules using the <code>-p</code> or <code>-m</code> flags), <a href="../command_line/#explicit-package-bases">--explicit-package-bases</a> provides a solution.</p>
<p>With <a href="../command_line/#explicit-package-bases">--explicit-package-bases</a>, mypy will locate the nearest parent directory that is a member of the <code>MYPYPATH</code> environment variable, the <a href="../config_file/#mypy_path">mypy_path</a> config or is the current working directory. Mypy will then use the relative path to determine the fully qualified module name.</p>
<p>For example, say your directory tree consists solely of <code>src/namespace_pkg/mod.py</code>. If you run the following command, mypy will correctly associate <code>mod.py</code> with <code>namespace_pkg.mod</code></p>
<div class="language-shell highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>$<span style="color: #bbbbbb"> </span><span style="color: #19177C">MYPYPATH</span><span style="color: #666666">=</span>src<span style="color: #bbbbbb"> </span>mypy<span style="color: #bbbbbb"> </span>--namespace-packages<span style="color: #bbbbbb"> </span>--explicit-package-bases<span style="color: #bbbbbb"> </span>.
</code></pre></div>
</li>
</ol>
<p>If you pass a file not ending in <code>.py[i]</code>, the module name assumed is <code>__main__</code> (matching the behavior of the Python interpreter), unless <a href="../command_line/#scripts-are-modules">--scripts-are-modules</a> is passed.</p>
<p>Passing <a href="../command_line/#v">-v</a> will show you the files and associated module names that mypy will check.</p>
<h2 id="mypy-如何处理导入">mypy 如何处理导入<a class="headerlink" href="#mypy-如何处理导入" title="Permanent link">&para;</a></h2>
<p><strong>How mypy handles imports</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">中文</label><label for="__tabbed_5_2">英文</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
<div class="tabbed-block"></div>
</div>
</div>
<p>When mypy encounters an <code>import</code> statement, it will first <a href="#如何找到导入">attempt to locate</a> that module or type stubs for that module in the file system. Mypy will then type check the imported module. There are three different outcomes of this process:</p>
<ol>
<li>
<p>Mypy is unable to follow the import: the module either does not exist, or is a third party library that does not use type hints.</p>
</li>
<li>
<p>Mypy is able to follow and type check the import, but you did not want mypy to type check that module at all.</p>
</li>
<li>
<p>Mypy is able to successfully both follow and type check the module, and you want mypy to type check that module.</p>
</li>
</ol>
<p>The third outcome is what mypy will do in the ideal case. The following sections will discuss what to do in the other two cases.</p>
<h2 id="缺失的导入">缺失的导入<a class="headerlink" href="#缺失的导入" title="Permanent link">&para;</a></h2>
<p><strong>Missing imports</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="6:2"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><input id="__tabbed_6_2" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">中文</label><label for="__tabbed_6_2">英文</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
<div class="tabbed-block"></div>
</div>
</div>
<p>When you import a module, mypy may report that it is unable to follow the import. This can cause errors that look like the following:</p>
<div class="language-text highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>main.py:1: error: Skipping analyzing &#39;django&#39;: module is installed, but missing library stubs or py.typed marker
main.py:2: error: Library stubs not installed for &quot;requests&quot;
main.py:3: error: Cannot find implementation or library stub for module named &quot;this_module_does_not_exist&quot;
</code></pre></div>
<p>If you get any of these errors on an import, mypy will assume the type of that module is <code>Any</code>, the dynamic type. This means attempting to access any attribute of the module will automatically succeed:</p>
<div class="language-python highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Error: Cannot find implementation or library stub for module named &#39;does_not_exist&#39;</span>
<span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">does_not_exist</span>

<span style="color: #3D7B7B; font-style: italic"># But this type checks, and x will have type &#39;Any&#39;</span>
x <span style="color: #666666">=</span> does_not_exist<span style="color: #666666">.</span>foobar()
</code></pre></div>
<p>This can result in mypy failing to warn you about errors in your code. Since operations on <code>Any</code> result in <code>Any</code>, these dynamic types can propagate through your code, making type checking less effective. See <a href="../../mypy/dynamic_typing/">dynamic-typing</a> for more information.</p>
<p>The next sections describe what each of these errors means and recommended next steps; scroll to the section that matches your error.</p>
<h3 id="缺失的库存根或-pytyped-标记">缺失的库存根或 py.typed 标记<a class="headerlink" href="#缺失的库存根或-pytyped-标记" title="Permanent link">&para;</a></h3>
<p><strong>Missing library stubs or py.typed marker</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="7:2"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><input id="__tabbed_7_2" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="__tabbed_7_1">中文</label><label for="__tabbed_7_2">英文</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
<div class="tabbed-block"></div>
</div>
</div>
<p>If you are getting a <code>Skipping analyzing X: module is installed, but missing library stubs or py.typed marker</code>, error, this means mypy was able to find the module you were importing, but no corresponding type hints.</p>
<p>Mypy will not try inferring the types of any 3<sup>rd</sup> party libraries you have installed unless they either have declared themselves to be <a href="../installed_packages/">PEP 561 compliant stub package</a> (e.g. with a <code>py.typed</code> file) or have registered themselves on <a href="https://github.com/python/typeshed">typeshed</a>, the repository of types for the standard library and some 3<sup>rd</sup> party libraries.</p>
<p>If you are getting this error, try to obtain type hints for the library you're using:</p>
<ol>
<li>
<p>Upgrading the version of the library you're using, in case a newer version has started to include type hints.</p>
</li>
<li>
<p>Searching to see if there is a [PEP 561 compliant stub package]<a href="../installed_packages/">PEP 561 compliant stub package</a> corresponding to your third party library. Stub packages let you install type hints independently from the library itself.</p>
<p>For example, if you want type hints for the <code>django</code> library, you can install the <a href="https://pypi.org/project/django-stubs/">django-stubs</a> package.</p>
</li>
<li>
<p><a href="../../mypy/stub_files/">Writing your own stub files</a> containing type hints for the library. You can point mypy at your type hints either by passing them in via the command line, by using the  <a href="../config_file/#files">files</a> or <a href="../config_file/#mypy_path">mypy_path</a> config file options, or by adding the location to the <code>MYPYPATH</code> environment variable.</p>
<p>These stub files do not need to be complete! A good strategy is to use [stubgen <stubgen>], a program that comes bundled with mypy, to generate a first rough draft of the stubs. You can then iterate on just the parts of the library you need.</p>
<p>If you want to share your work, you can try contributing your stubs back to the library -- see our documentation on creating <a href="../installed_packages/">PEP 561 compliant packages</a>.</p>
</li>
</ol>
<p>If you are unable to find any existing type hints nor have time to write your own, you can instead <em>suppress</em> the errors.</p>
<p>All this will do is make mypy stop reporting an error on the line containing the import: the imported module will continue to be of type <code>Any</code>, and mypy may not catch errors in its use.</p>
<ol>
<li>
<p>To suppress a <em>single</em> missing import error, add a <code># type: ignore</code> at the end of the line containing the import.</p>
</li>
<li>
<p>To suppress <em>all</em> missing import errors from a single library, add a per-module section to your <a href="../config_file/">mypy config file</a> setting <a href="../config_file/#ignore_missing_imports">ignore_missing_imports</a> to True for that library. For example, suppose your codebase makes heavy use of an (untyped) library named <code>foobar</code>. You can silence all import errors associated with that library and that library alone by adding the following section to your config file</p>
<div class="language-ini highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">[mypy-foobar.*]</span>
<span style="color: #bbbbbb">    </span><span style="color: #687822">ignore_missing_imports</span><span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span><span style="color: #BA2121">True</span>
</code></pre></div>
<p>Note: this option is equivalent to adding a <code># type: ignore</code> to every import of <code>foobar</code> in your codebase. For more information, see the documentation about configuring <a href="../config_file/#导入发现">import discovery</a> in config files. The <code>.*</code> after <code>foobar</code> will ignore imports of <code>foobar</code> modules and subpackages in addition to the <code>foobar</code> top-level package namespace.</p>
</li>
<li>
<p>To suppress <em>all</em> missing import errors for <em>all</em> untyped libraries in your codebase, use <a href="../command_line/#ignore-missing-imports">disable-error-code=import-untyped</a>. See <a href="../../mypy_other/error_code_list/#检查导入目标是否可以找到-import-untyped">code-import-untyped</a> for more details on this error code.</p>
<p>You can also set <a href="../config_file/#disable_error_code">disable_error_code</a>, like so</p>
<div class="language-ini highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">[mypy]</span>
<span style="color: #687822">disable_error_code</span><span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span><span style="color: #BA2121">import-untyped</span>
</code></pre></div>
<p>You can also set the <a href="../command_line/#ignore-missing-imports">--ignore-missing-imports</a> command line flag or set the <a href="../config_file/#ignore_missing_imports">ignore_missing_imports</a> config file option to True in the <em>global</em> section of your mypy config file. We recommend avoiding <code>--ignore-missing-imports</code> if possible: it's equivalent to adding a <code># type: ignore</code> to all unresolved imports in your codebase.</p>
</li>
</ol>
<h3 id="库存根未安装">库存根未安装<a class="headerlink" href="#库存根未安装" title="Permanent link">&para;</a></h3>
<p><strong>Library stubs not installed</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="8:2"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><input id="__tabbed_8_2" name="__tabbed_8" type="radio" /><div class="tabbed-labels"><label for="__tabbed_8_1">中文</label><label for="__tabbed_8_2">英文</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
<div class="tabbed-block"></div>
</div>
</div>
<p>If mypy can't find stubs for a third-party library, and it knows that stubs exist for the library, you will get a message like this:</p>
<div class="language-text highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>main.py:1: error: Library stubs not installed for &quot;yaml&quot;
main.py:1: note: Hint: &quot;python3 -m pip install types-PyYAML&quot;
main.py:1: note: (or run &quot;mypy --install-types&quot; to install all missing stub packages)
</code></pre></div>
<p>You can resolve the issue by running the suggested pip commands. If you're running mypy in CI, you can ensure the presence of any stub packages you need the same as you would any other test dependency, e.g. by adding them to the appropriate <code>requirements.txt</code> file.</p>
<p>Alternatively, add the <a href="../command_line/#install-types">--install-types</a> to your mypy command to install all known missing stubs:</p>
<div class="language-shell highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>mypy<span style="color: #bbbbbb"> </span>--install-types
</code></pre></div>
<p>This is slower than explicitly installing stubs, since it effectively runs mypy twice -- the first time to find the missing stubs, and the second time to type check your code properly after mypy has installed the stubs. It also can make controlling stub versions harder, resulting in less reproducible type checking.</p>
<p>By default, <a href="../command_line/#install-types">--install-types</a> shows a confirmation prompt. Use <a href="../command_line/#non-interactive">--non-interactive</a> to install all suggested stub packages without asking for confirmation <em>and</em> type check your code:</p>
<p>If you've already installed the relevant third-party libraries in an environment other than the one mypy is running in, you can use <a href="../command_line/#python-executable">--python-executable</a> flag to point to the Python executable for that environment, and mypy will find packages installed for that Python executable.</p>
<p>If you've installed the relevant stub packages and are still getting this error, see the <a href="#无法找到实现或库存根">section below</a>.</p>
<h3 id="无法找到实现或库存根">无法找到实现或库存根<a class="headerlink" href="#无法找到实现或库存根" title="Permanent link">&para;</a></h3>
<p><strong>Cannot find implementation or library stub</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="9:2"><input checked="checked" id="__tabbed_9_1" name="__tabbed_9" type="radio" /><input id="__tabbed_9_2" name="__tabbed_9" type="radio" /><div class="tabbed-labels"><label for="__tabbed_9_1">中文</label><label for="__tabbed_9_2">英文</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
<div class="tabbed-block"></div>
</div>
</div>
<p>If you are getting a <code>Cannot find implementation or library stub for module</code> error, this means mypy was not able to find the module you are trying to import, whether it comes bundled with type hints or not. If you are getting this error, try:</p>
<ol>
<li>
<p>Making sure your import does not contain a typo.</p>
</li>
<li>
<p>If the module is a third party library, making sure that mypy is able to find the interpreter containing the installed library.</p>
<p>For example, if you are running your code in a virtualenv, make sure to install and use mypy within the virtualenv. Alternatively, if you want to use a globally installed mypy, set the <a href="../command_line/#python-executable">--python-executable</a> command line flag to point the Python interpreter containing your installed third party packages.</p>
<p>You can confirm that you are running mypy from the environment you expect by running it like <code>python -m mypy ...</code>. You can confirm that you are installing into the environment you expect by running pip like <code>python -m pip ...</code>.</p>
</li>
<li>
<p>Reading the <a href="#如何找到导入">finding-imports</a> section below to make sure you
    understand how exactly mypy searches for and finds modules and modify
    how you're invoking mypy accordingly.</p>
</li>
<li>
<p>Directly specifying the directory containing the module you want to type check from the command line, by using the <a href="../config_file/#mypy_path">mypy_path</a> or <a href="../config_file/#files">files</a> config file options, or by using the <code>MYPYPATH</code> environment variable.</p>
<p>Note: if the module you are trying to import is actually a <em>submodule</em> of some package, you should specify the directory containing the <em>entire</em> package. For example, suppose you are trying to add the module <code>foo.bar.baz</code> which is located at <code>~/foo-project/src/foo/bar/baz.py</code>. In this case, you must run <code>mypy ~/foo-project/src</code> (or set the <code>MYPYPATH</code> to <code>~/foo-project/src</code>).</p>
</li>
</ol>
<h2 id="如何找到导入">如何找到导入<a class="headerlink" href="#如何找到导入" title="Permanent link">&para;</a></h2>
<p><strong>How imports are found</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="10:2"><input checked="checked" id="__tabbed_10_1" name="__tabbed_10" type="radio" /><input id="__tabbed_10_2" name="__tabbed_10" type="radio" /><div class="tabbed-labels"><label for="__tabbed_10_1">中文</label><label for="__tabbed_10_2">英文</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
<div class="tabbed-block"></div>
</div>
</div>
<p>When mypy encounters an <code>import</code> statement or receives module names from the command line via the <a href="../command_line/#m">--module</a> or <a href="../command_line/#p">--package</a> flags, mypy tries to find the module on the file system similar to the way Python finds it. However, there are some differences.</p>
<p>First, mypy has its own search path. This is computed from the following items:</p>
<ul>
<li>The <code>MYPYPATH</code> environment variable (a list of directories, colon-separated on UNIX systems, semicolon-separated on Windows).</li>
<li>The <a href="../config_file/#mypy_path">mypy_path</a> config file option.</li>
<li>The directories containing the sources given on the command line (see <a href="#映射文件路径到模块">Mapping file paths to modules</a>).</li>
<li>The installed packages marked as safe for type checking (see <a href="../installed_packages/">PEP 561 support</a>)</li>
<li>The relevant directories of the <a href="https://github.com/python/typeshed">typeshed</a> repo.</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You cannot point to a stub-only package (<a href="https://peps.python.org/pep-0561/">561</a>) via the <code>MYPYPATH</code>, it must be installed (see <a href="../installed_packages/">PEP 561 support</a>)</p>
</div>
<p>Second, mypy searches for stub files in addition to regular Python files and packages. The rules for searching for a module <code>foo</code> are as follows:</p>
<ul>
<li>The search looks in each of the directories in the search path (see above) until a match is found.</li>
<li>If a package named <code>foo</code> is found (i.e. a directory <code>foo</code> containing an <code>__init__.py</code> or <code>__init__.pyi</code> file) that's a match.</li>
<li>If a stub file named <code>foo.pyi</code> is found, that's a match.</li>
<li>If a Python module named <code>foo.py</code> is found, that's a match.</li>
</ul>
<p>These matches are tried in order, so that if multiple matches are found in the same directory on the search path (e.g. a package and a Python file, or a stub file and a Python file) the first one in the above list wins.</p>
<p>In particular, if a Python file and a stub file are both present in the same directory on the search path, only the stub file is used. (However, if the files are in different directories, the one found in the earlier directory is used.)</p>
<p>Setting <a href="../config_file/#mypy_path">mypy_path</a>/<code>MYPYPATH</code> is mostly useful in the case where you want to try running mypy against multiple distinct sets of files that happen to share some common dependencies.</p>
<p>For example, if you have multiple projects that happen to be using the same set of work-in-progress stubs, it could be convenient to just have your <code>MYPYPATH</code> point to a single directory containing the stubs.</p>
<h2 id="跟随导入">跟随导入<a class="headerlink" href="#跟随导入" title="Permanent link">&para;</a></h2>
<p><strong>Following imports</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="11:2"><input checked="checked" id="__tabbed_11_1" name="__tabbed_11" type="radio" /><input id="__tabbed_11_2" name="__tabbed_11" type="radio" /><div class="tabbed-labels"><label for="__tabbed_11_1">中文</label><label for="__tabbed_11_2">英文</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
<div class="tabbed-block"></div>
</div>
</div>
<p>Mypy is designed to <a href="#如何找到导入">doggedly follow all imports</a>, even if the imported module is not a file you explicitly wanted mypy to check.</p>
<p>For example, suppose we have two modules <code>mycode.foo</code> and <code>mycode.bar</code>: the former has type hints and the latter does not. We run <a href="../command_line/#m">mypy -m mycode.foo</a> and mypy discovers that <code>mycode.foo</code> imports <code>mycode.bar</code>.</p>
<p>How do we want mypy to type check <code>mycode.bar</code>? Mypy's behaviour here is configurable -- although we <strong>strongly recommend</strong> using the default -- by using the <a href="../command_line/#follow-imports">--follow-imports</a> flag. This flag accepts one of four string values:</p>
<ul>
<li>
<p><code>normal</code> (the default, recommended) follows all imports normally and type checks all top level code (as well as the bodies of all functions and methods with at least one type annotation in the signature).</p>
</li>
<li>
<p><code>silent</code> behaves in the same way as <code>normal</code> but will additionally <em>suppress</em> any error messages.</p>
</li>
<li>
<p><code>skip</code> will <em>not</em> follow imports and instead will silently replace the module (and <em>anything imported from it</em>) with an object of type <code>Any</code>.</p>
</li>
<li>
<p><code>error</code> behaves in the same way as <code>skip</code> but is not quite as silent -- it will flag the import as an error, like this</p>
<div class="language-text highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>main.py:1: note: Import of &quot;mycode.bar&quot; ignored
main.py:1: note: (Using --follow-imports=error, module not passed on command line)
</code></pre></div>
</li>
</ul>
<p>If you are starting a new codebase and plan on using type hints from the start, we recommend you use either <a href="../command_line/#follow-imports">--follow-imports</a> (the default) or <a href="../command_line/#follow-imports">--follow-imports=error</a>. Either option will help make sure you are not skipping checking any part of your codebase by accident.</p>
<p>If you are planning on adding type hints to a large, existing code base, we recommend you start by trying to make your entire codebase (including files that do not use type hints) pass under <a href="../command_line/#follow-imports">follow-imports=normal</a>. This is usually not too difficult to do: mypy is designed to report as few error messages as possible when it is looking at unannotated code.</p>
<p>Only if doing this is intractable, we recommend passing mypy just the files you want to type check and use <a href="../command_line/#follow-imports">follow-imports=silent</a>. Even if mypy is unable to perfectly type check a file, it can still glean some useful information by parsing it (for example, understanding what methods a given object has). See <a href="../../mypy/existing_code/">existing-code</a> for more recommendations.</p>
<p>We do not recommend using <code>skip</code> unless you know what you are doing: while this option can be quite powerful, it can also cause many hard-to-debug errors.</p>
<p>Adjusting import following behaviour is often most useful when restricted to specific modules. This can be accomplished by setting a per-module <a href="../config_file/#follow_imports">follow_imports</a> config option.</p>

  <hr>
<div class="md-source-file">
  <small>
    
      最后更新:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">2024年9月14日</span>
      
        <br>
        创建日期:
        <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">2024年9月14日</span>
      
    
  </small>
</div>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["header.autohide", "navigation.top", "navigation.tabs", "navigation.tabs.sticky", "navigation.path", "content.tabs.link", "content.code.copy", "content.tooltips", "navigation.indexes", "navigation.prune", "navigation.instant"], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.94c44541.min.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>