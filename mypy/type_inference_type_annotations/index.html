
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="hellowac-类型检查">
      
      
      
      
        <link rel="prev" href="../builtin_types/">
      
      
        <link rel="next" href="../kind_of_types/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.4">
    
    
      
        <title>类型推断和类型注解 - mypy类型检查</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.bd3936ea.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
        html.glightbox-open { overflow: initial; height: 100%; }
        .gslide-title { margin-top: 0px; user-select: text; }
        .gslide-desc { color: #666; user-select: text; }
        .gslide-image img { background: white; }
        
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
            </style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="blue">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#类型推断和类型注解" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
你当前浏览的版本已不是最新版本，
<a href="../../..">
    <strong>点击这里</strong>
</a>查看最新版本的文档

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../.." title="mypy类型检查" class="md-header__button md-logo" aria-label="mypy类型检查" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            mypy类型检查
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              类型推断和类型注解
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/hellowac/mypy-zh-cn" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    hellowac/myppy-zh-cn
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  欢迎来到mypy文档!

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../" class="md-tabs__link">
          
  
    
  
  第一步

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../builtin_types/" class="md-tabs__link">
          
  
    
  
  类型系统参考

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../mypy_conf/" class="md-tabs__link">
          
  
    
  
  配置和运行mypy

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../mypy_other/" class="md-tabs__link">
          
  
    
  
  其他杂项

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="mypy类型检查" class="md-nav__button md-logo" aria-label="mypy类型检查" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    mypy类型检查
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/hellowac/mypy-zh-cn" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    hellowac/myppy-zh-cn
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    欢迎来到mypy文档!
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    第一步
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            第一步
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../cheat_sheet_py3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    类型提示备忘录
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../existing_code/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    将 mypy 与现有代码库结合使用
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    类型系统参考
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            类型系统参考
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../builtin_types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    内置类型
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    类型推断和类型注解
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    类型推断和类型注解
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#类型推断" class="md-nav__link">
    类型推断
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#变量的显式类型" class="md-nav__link">
    变量的显式类型
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#集合的显式类型" class="md-nav__link">
    集合的显式类型
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#容器类型的兼容性" class="md-nav__link">
    容器类型的兼容性
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#类型推断中的上下文" class="md-nav__link">
    类型推断中的上下文
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#消除类型错误" class="md-nav__link">
    消除类型错误
  </a>
  
    <nav class="md-nav" aria-label="消除类型错误">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#输入忽略错误代码" class="md-nav__link">
    输入忽略错误代码
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#其他消除错误的方法" class="md-nav__link">
    其他消除错误的方法
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../kind_of_types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    类型种类
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../class_basics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    类的基础
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../annotation_issue_at_runtime/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    运行时的注解问题
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../protocol_and_struct_subtyping/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    协议及其子类型
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../dynamic_typing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    动态类型
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../type_narrowing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    类型收缩
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../duck_type_compatibility/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    鸭子类型兼容
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../stub_files/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    存根文件
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../generics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    泛型
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../more_types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    更多类型
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../literal_and_enum/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    字面量和枚举
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../typeddict/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    类型字典
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../final_names_methods_classes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    最终名称、方法和类
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../metaclasses/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    元类
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../mypy_conf/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    配置和运行mypy
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            配置和运行mypy
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mypy_conf/running_mypy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    运行mypy和管理导入
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mypy_conf/command_line/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mypy命令行
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mypy_conf/config_file/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mypy配置文件
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mypy_conf/inline_config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    内联配置
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mypy_conf/mypy_daemon/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mypy服务(守护进程)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mypy_conf/installed_packages/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    使用安装包
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mypy_conf/extending_mypy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    扩展和集成 mypy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mypy_conf/stubgen/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    自动存根生成
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mypy_conf/stubtest/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    自动存根测试
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../mypy_other/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    其他杂项
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            其他杂项
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mypy_other/common_issues/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    常见问题及解决办法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mypy_other/supported_python_features/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    支持的 Python 特性
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mypy_other/error_codes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    错误码
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mypy_other/error_code_list/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    默认启用的错误码
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mypy_other/error_code_list2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    可选检查的错误代码
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mypy_other/additional_features/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    额外特性
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mypy_other/faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    常见问题解答
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/python/mypy" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    项目地址
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="https://mypy-lang.org/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    网页地址
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#类型推断" class="md-nav__link">
    类型推断
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#变量的显式类型" class="md-nav__link">
    变量的显式类型
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#集合的显式类型" class="md-nav__link">
    集合的显式类型
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#容器类型的兼容性" class="md-nav__link">
    容器类型的兼容性
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#类型推断中的上下文" class="md-nav__link">
    类型推断中的上下文
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#消除类型错误" class="md-nav__link">
    消除类型错误
  </a>
  
    <nav class="md-nav" aria-label="消除类型错误">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#输入忽略错误代码" class="md-nav__link">
    输入忽略错误代码
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#其他消除错误的方法" class="md-nav__link">
    其他消除错误的方法
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="类型推断和类型注解">类型推断和类型注解<a class="headerlink" href="#类型推断和类型注解" title="Permanent link">&para;</a></h1>
<p><strong>Type inference and type annotations</strong></p>
<h2 id="类型推断">类型推断<a class="headerlink" href="#类型推断" title="Permanent link">&para;</a></h2>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">中文</label><label for="__tabbed_1_2">英文</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>对于大多数变量，如果您没有显式指定其类型，mypy 将根据最初分配给变量的类型推断出正确的类型。</p>
<div class="language-python highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># 尽管没有注释，Mypy 仍会推断这些变量的类型</span>
i <span style="color: #666666">=</span> <span style="color: #666666">1</span>
reveal_type(i)  <span style="color: #3D7B7B; font-style: italic"># 显示的类型是 “builtins.int”</span>
l <span style="color: #666666">=</span> [<span style="color: #666666">1</span>, <span style="color: #666666">2</span>]
reveal_type(l)  <span style="color: #3D7B7B; font-style: italic"># 显示类型为 “builtins.list[builtins.int]”</span>
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">笔记</p>
<p>请注意，mypy 不会在动态类型函数（没有函数类型注释的函数）中使用类型推断 - 在此类函数中，每个局部变量类型默认为“Any”。 有关更多详细信息，请参阅<a href="https://mypy.readthedocs.io/en/stable/dynamic_typing.html#dynamic-typing"><code>dynamic-typing</code></a>。</p>
<div class="language-python highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">untyped_function</span>():
    i <span style="color: #666666">=</span> <span style="color: #666666">1</span>
    reveal_type(i) <span style="color: #3D7B7B; font-style: italic"># 揭示的类型是 &quot;Any&quot;</span>
                   <span style="color: #3D7B7B; font-style: italic"># “reveal_type”在未经检查的函数中始终输出“Any”</span>
</code></pre></div>
</div>
</div>
<div class="tabbed-block">
<p><strong>Type inference</strong></p>
<p>For most variables, if you do not explicitly specify its type, mypy will infer the correct type based on what is initially assigned to the variable.</p>
<div class="language-python highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Mypy will infer the type of these variables, despite no annotations</span>
i <span style="color: #666666">=</span> <span style="color: #666666">1</span>
reveal_type(i)  <span style="color: #3D7B7B; font-style: italic"># Revealed type is &quot;builtins.int&quot;</span>
l <span style="color: #666666">=</span> [<span style="color: #666666">1</span>, <span style="color: #666666">2</span>]
reveal_type(l)  <span style="color: #3D7B7B; font-style: italic"># Revealed type is &quot;builtins.list[builtins.int]&quot;</span>
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">Note</p>
<p>Note that mypy will not use type inference in dynamically typed functions (those without a function type annotation) — every local variable type defaults to <code>Any</code> in such functions. For more details, see <a href="https://mypy.readthedocs.io/en/stable/dynamic_typing.html#dynamic-typing"><code>dynamic-typing</code></a>.</p>
<div class="language-python highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">untyped_function</span>():
    i <span style="color: #666666">=</span> <span style="color: #666666">1</span>
    reveal_type(i) <span style="color: #3D7B7B; font-style: italic"># Revealed type is &quot;Any&quot;</span>
                   <span style="color: #3D7B7B; font-style: italic"># &#39;reveal_type&#39; always outputs &#39;Any&#39; in unchecked functions</span>
</code></pre></div>
</div>
</div>
</div>
</div>
<h2 id="变量的显式类型">变量的显式类型<a class="headerlink" href="#变量的显式类型" title="Permanent link">&para;</a></h2>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">中文</label><label for="__tabbed_2_2">英文</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>您可以使用变量类型注释覆盖变量的推断类型：</p>
<div class="language-python highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">typing</span> <span style="color: #008000; font-weight: bold">import</span> Union

x: Union[<span style="color: #008000">int</span>, <span style="color: #008000">str</span>] <span style="color: #666666">=</span> <span style="color: #666666">1</span>
</code></pre></div>
<p>如果没有类型注释，“x” 的类型将只是 “int” 。 我们使用注释给它一个更通用的类型 “Union[int, str]”（该类型意味着该值可以是 “int” 或 “str” ）。</p>
<p>考虑这个问题的最佳方法是类型注释设置变量的类型，而不是表达式的类型。 例如，mypy 会抱怨以下代码：</p>
<div class="language-python highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>x: Union[<span style="color: #008000">int</span>, <span style="color: #008000">str</span>] <span style="color: #666666">=</span> <span style="color: #666666">1.1</span>  <span style="color: #3D7B7B; font-style: italic"># error: 赋值中的类型不兼容（表达式的类型为“float”，变量的类型为“Union[int, str]”）</span>
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">Note</p>
<p>要显式覆盖表达式的类型，您可以使用 [<code>cast(\&lt;type\&gt;, \&lt;expression\&gt;) &lt;typing.cast&gt;</code>](https://docs.python.org/3/library/typing.html#typing.cast）。 有关详细信息，请参阅 <a href="https://mypy.readthedocs.io/en/stable/type_narrowing.html#casts"><code>casts</code></a>。</p>
</div>
<p>请注意，您可以显式声明变量的类型而不为其指定初始值：</p>
<div class="language-python highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>    <span style="color: #3D7B7B; font-style: italic"># 我们只解压两个值，因此 mypy 没有右侧值来推断“cs”的类型：</span>
    a, b, <span style="color: #666666">*</span>cs <span style="color: #666666">=</span> <span style="color: #666666">1</span>, <span style="color: #666666">2</span>  <span style="color: #3D7B7B; font-style: italic"># error: 需要“cs”的类型注解</span>

    rs: <span style="color: #008000">list</span>[<span style="color: #008000">int</span>]  <span style="color: #3D7B7B; font-style: italic"># no assignment!</span>
    p, q, <span style="color: #666666">*</span>rs <span style="color: #666666">=</span> <span style="color: #666666">1</span>, <span style="color: #666666">2</span>  <span style="color: #3D7B7B; font-style: italic"># OK</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p><strong>Explicit types for variables</strong></p>
<p>You can override the inferred type of a variable by using a variable type annotation:</p>
<div class="language-python highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">typing</span> <span style="color: #008000; font-weight: bold">import</span> Union

x: Union[<span style="color: #008000">int</span>, <span style="color: #008000">str</span>] <span style="color: #666666">=</span> <span style="color: #666666">1</span>
</code></pre></div>
<p>Without the type annotation, the type of <code>x</code> would be just <code>int</code>. We use an annotation to give it a more general type <code>Union[int, str]</code> (this type means that the value can be either an <code>int</code> or a <code>str</code>).</p>
<p>The best way to think about this is that the type annotation sets the type of the variable, not the type of the expression. For instance, mypy will complain about the following code:</p>
<div class="language-python highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>x: Union[<span style="color: #008000">int</span>, <span style="color: #008000">str</span>] <span style="color: #666666">=</span> <span style="color: #666666">1.1</span>  <span style="color: #3D7B7B; font-style: italic"># error: Incompatible types in assignment</span>
                          <span style="color: #3D7B7B; font-style: italic"># (expression has type &quot;float&quot;, variable has type &quot;Union[int, str]&quot;)</span>
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">Note</p>
<p>To explicitly override the type of an expression you can use <a href="https://docs.python.org/3/library/typing.html#typing.cast"><code>cast(\&lt;type\&gt;, \&lt;expression\&gt;) &lt;typing.cast&gt;</code></a>. See <a href="https://mypy.readthedocs.io/en/stable/type_narrowing.html#casts"><code>casts</code></a> for details.</p>
</div>
<p>Note that you can explicitly declare the type of a variable without giving it an initial value:</p>
<div class="language-python highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>    <span style="color: #3D7B7B; font-style: italic"># We only unpack two values, so there&#39;s no right-hand side value</span>
    <span style="color: #3D7B7B; font-style: italic"># for mypy to infer the type of &quot;cs&quot; from:</span>
    a, b, <span style="color: #666666">*</span>cs <span style="color: #666666">=</span> <span style="color: #666666">1</span>, <span style="color: #666666">2</span>  <span style="color: #3D7B7B; font-style: italic"># error: Need type annotation for &quot;cs&quot;</span>

    rs: <span style="color: #008000">list</span>[<span style="color: #008000">int</span>]  <span style="color: #3D7B7B; font-style: italic"># no assignment!</span>
    p, q, <span style="color: #666666">*</span>rs <span style="color: #666666">=</span> <span style="color: #666666">1</span>, <span style="color: #666666">2</span>  <span style="color: #3D7B7B; font-style: italic"># OK</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="集合的显式类型">集合的显式类型<a class="headerlink" href="#集合的显式类型" title="Permanent link">&para;</a></h2>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">中文</label><label for="__tabbed_3_2">英文</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>类型检查器不能总是推断出列表或字典的类型。 当创建空列表或字典并将其分配给没有显式变量类型的新变量时，通常会出现这种情况。 这是一个示例，其中 mypy 在没有帮助的情况下无法推断类型：</p>
<div class="language-python highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>l <span style="color: #666666">=</span> []  <span style="color: #3D7B7B; font-style: italic"># Error: 需要变量 &quot;l&quot; 的类型注解</span>
</code></pre></div>
<p>在这些情况下，您可以使用类型注释显式指定类型：</p>
<div class="language-python highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>l: <span style="color: #008000">list</span>[<span style="color: #008000">int</span>] <span style="color: #666666">=</span> []       <span style="color: #3D7B7B; font-style: italic"># 创建 int 的空列表</span>
d: <span style="color: #008000">dict</span>[<span style="color: #008000">str</span>, <span style="color: #008000">int</span>] <span style="color: #666666">=</span> {}  <span style="color: #3D7B7B; font-style: italic"># 创建空字典（str -&gt; int）</span>
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">Note</p>
<p>在内置集合上使用类型参数（例如“list[int]”），例如 <a href="https://docs.python.org/3/library/stdtypes.html#list"><code>list</code></a>、<a href="https://docs.python.org/3/library/stdtypes.html#dict"><code>dict</code></a>、<a href="https://docs.python.org/3/library/stdtypes.html#tuple"><code>tuple</code></a> 和 <a href="https://docs.python.org/3/library/stdtypes.html#set"><code>set</code></a> 仅适用于 Python 3.9 及更高版本。 对于Python 3.8及更早版本，您必须使用<a href="https://docs.python.org/3/library/typing.html#typing.List"><code>List</code></a>（例如<code>List[int]</code>），<a href="https://docs.python.org/3/library/typing.html#typing.Dict"><code>Dict</code></a>，等等。</p>
</div>
</div>
<div class="tabbed-block">
<p><strong>Explicit types for collections</strong></p>
<p>The type checker cannot always infer the type of a list or a dictionary. This often arises when creating an empty list or dictionary and assigning it to a new variable that doesn't have an explicit variable type. Here is an example where mypy can't infer the type without some help:</p>
<div class="language-python highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>l <span style="color: #666666">=</span> []  <span style="color: #3D7B7B; font-style: italic"># Error: Need type annotation for &quot;l&quot;</span>
</code></pre></div>
<p>In these cases you can give the type explicitly using a type annotation:</p>
<div class="language-python highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>l: <span style="color: #008000">list</span>[<span style="color: #008000">int</span>] <span style="color: #666666">=</span> []       <span style="color: #3D7B7B; font-style: italic"># Create empty list of int</span>
d: <span style="color: #008000">dict</span>[<span style="color: #008000">str</span>, <span style="color: #008000">int</span>] <span style="color: #666666">=</span> {}  <span style="color: #3D7B7B; font-style: italic"># Create empty dictionary (str -&gt; int)</span>
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">Note</p>
<p>Using type arguments (e.g. <code>list[int]</code>) on builtin collections like <a href="https://docs.python.org/3/library/stdtypes.html#list"><code>list</code></a>,  <a href="https://docs.python.org/3/library/stdtypes.html#dict"><code>dict</code></a>, <a href="https://docs.python.org/3/library/stdtypes.html#tuple"><code>tuple</code></a>, and  <a href="https://docs.python.org/3/library/stdtypes.html#set"><code>set</code></a> only works in Python 3.9 and later. For Python 3.8 and earlier, you must use <a href="https://docs.python.org/3/library/typing.html#typing.List"><code>List</code></a> (e.g. <code>List[int]</code>), <a href="https://docs.python.org/3/library/typing.html#typing.Dict"><code>Dict</code></a>, and so on.</p>
</div>
</div>
</div>
</div>
<h2 id="容器类型的兼容性">容器类型的兼容性<a class="headerlink" href="#容器类型的兼容性" title="Permanent link">&para;</a></h2>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">中文</label><label for="__tabbed_4_2">英文</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>快速说明：容器类型有时可能不直观。 我们将在<a href="https://mypy.readthedocs.io/en/stable/common_issues.html#variance"><code>variance</code></a>中详细讨论这一点。 例如，以下程序会生成 mypy 错误，因为 mypy 将 <code>list[int]</code> 视为与 <code>list[object]</code> 不兼容：</p>
<div class="language-python highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">f</span>(l: <span style="color: #008000">list</span>[<span style="color: #008000">object</span>], k: <span style="color: #008000">list</span>[<span style="color: #008000">int</span>]) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    l <span style="color: #666666">=</span> k  <span style="color: #3D7B7B; font-style: italic"># error: 赋值中的类型不兼容</span>
</code></pre></div>
<p>不允许上述赋值的原因是允许赋值可能会导致非 int 值存储在 “int” 列表中：</p>
<div class="language-python highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">f</span>(l: <span style="color: #008000">list</span>[<span style="color: #008000">object</span>], k: <span style="color: #008000">list</span>[<span style="color: #008000">int</span>]) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
   l <span style="color: #666666">=</span> k
   l<span style="color: #666666">.</span>append(<span style="color: #BA2121">&#39;x&#39;</span>)
   <span style="color: #008000">print</span>(k[<span style="color: #666666">-1</span>])  <span style="color: #3D7B7B; font-style: italic"># 哎哟; list[int] 中的字符串</span>
</code></pre></div>
<p>其他容器类型，如 <a href="https://docs.python.org/3/library/stdtypes.html#dict"><code>dict</code></a> 和 <a href="https://docs.python.org/3/library"><code>set</code></a> /stdtypes.html#set) 的行为类似。</p>
<p>您仍然可以运行上面的程序； 它打印 “x”。 这说明静态类型不会影响程序的运行时行为。 您可以运行类型检查失败的程序，这在执行大型重构时通常非常方便。 因此，您始终可以“解决”类型系统，并且它并不会真正限制您在程序中可以执行的操作。</p>
</div>
<div class="tabbed-block">
<p><strong>Compatibility of container types</strong></p>
<p>A quick note: container types can sometimes be unintuitive. We'll discuss this more in <a href="https://mypy.readthedocs.io/en/stable/common_issues.html#variance"><code>variance</code></a>. For example, the following program generates a mypy error, because mypy treats <code>list[int]</code> as incompatible with <code>list[object]</code>:</p>
<div class="language-python highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">f</span>(l: <span style="color: #008000">list</span>[<span style="color: #008000">object</span>], k: <span style="color: #008000">list</span>[<span style="color: #008000">int</span>]) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    l <span style="color: #666666">=</span> k  <span style="color: #3D7B7B; font-style: italic"># error: Incompatible types in assignment</span>
</code></pre></div>
<p>The reason why the above assignment is disallowed is that allowing the assignment could result in non-int values stored in a list of <code>int</code>:</p>
<div class="language-python highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">f</span>(l: <span style="color: #008000">list</span>[<span style="color: #008000">object</span>], k: <span style="color: #008000">list</span>[<span style="color: #008000">int</span>]) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
   l <span style="color: #666666">=</span> k
   l<span style="color: #666666">.</span>append(<span style="color: #BA2121">&#39;x&#39;</span>)
   <span style="color: #008000">print</span>(k[<span style="color: #666666">-1</span>])  <span style="color: #3D7B7B; font-style: italic"># Ouch; a string in list[int]</span>
</code></pre></div>
<p>Other container types like <a href="https://docs.python.org/3/library/stdtypes.html#dict"><code>dict</code></a> and <a href="https://docs.python.org/3/library/stdtypes.html#set"><code>set</code></a> behave similarly.</p>
<p>You can still run the above program; it prints <code>x</code>. This illustrates the fact that static types do not affect the runtime behavior of programs. You can run programs with type check failures, which is often very handy when performing a large refactoring. Thus you can always 'work around' the type system, and it doesn't really limit what you can do in your program.</p>
</div>
</div>
</div>
<h2 id="类型推断中的上下文">类型推断中的上下文<a class="headerlink" href="#类型推断中的上下文" title="Permanent link">&para;</a></h2>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">中文</label><label for="__tabbed_5_2">英文</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>类型推断是<em>双向的</em>并考虑上下文。</p>
<p>Mypy 在推断右侧表达式的类型时会考虑赋值左侧变量的类型。 例如，以下内容将类型检查：</p>
<div class="language-python highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">f</span>(l: <span style="color: #008000">list</span>[<span style="color: #008000">object</span>]) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    l <span style="color: #666666">=</span> [<span style="color: #666666">1</span>, <span style="color: #666666">2</span>]  <span style="color: #3D7B7B; font-style: italic"># 推断 [1, 2] 的类型为 list[object]，而不是 list[int]</span>
</code></pre></div>
<p>值表达式 “[1, 2]” 使用附加上下文进行类型检查，该上下文被分配给 “list[object]” 类型的变量。 这用于将<em>表达式</em>的类型推断为 “list[object]” 。</p>
<p>声明的参数类型也用于类型上下文。 在这个程序中，mypy 知道空列表 <code>[]</code> 应该具有类型 <code>list[int]</code>，基于 <code>foo</code> 中 <code>arg</code> 的声明类型：</p>
<div class="language-python highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">foo</span>(arg: <span style="color: #008000">list</span>[<span style="color: #008000">int</span>]) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    <span style="color: #008000">print</span>(<span style="color: #BA2121">&#39;Items:&#39;</span>, <span style="color: #BA2121">&#39;&#39;</span><span style="color: #666666">.</span>join(<span style="color: #008000">str</span>(a) <span style="color: #008000; font-weight: bold">for</span> a <span style="color: #AA22FF; font-weight: bold">in</span> arg))

foo([])  <span style="color: #3D7B7B; font-style: italic"># OK</span>
</code></pre></div>
<p>但是，上下文仅在单个语句中起作用。 这里 mypy 需要空列表的注释，因为上下文仅在以下语句中可用：</p>
<div class="language-python highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">foo</span>(arg: <span style="color: #008000">list</span>[<span style="color: #008000">int</span>]) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    <span style="color: #008000">print</span>(<span style="color: #BA2121">&#39;Items:&#39;</span>, <span style="color: #BA2121">&#39;, &#39;</span><span style="color: #666666">.</span>join(arg))

a <span style="color: #666666">=</span> []  <span style="color: #3D7B7B; font-style: italic"># Error: 需要“a”的类型注解</span>
foo(a)
</code></pre></div>
<p>通过添加类型注解可以轻松解决该问题：</p>
<div class="language-Python highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #666666">...</span>
a: <span style="color: #008000">list</span>[<span style="color: #008000">int</span>] <span style="color: #666666">=</span> []  <span style="color: #3D7B7B; font-style: italic"># OK</span>
foo(a)
</code></pre></div>
</div>
<div class="tabbed-block">
<p><strong>Context in type inference</strong></p>
<p>Type inference is <em>bidirectional</em> and takes context into account.</p>
<p>Mypy will take into account the type of the variable on the left-hand side of an assignment when inferring the type of the expression on the right-hand side. For example, the following will type check:</p>
<div class="language-python highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">f</span>(l: <span style="color: #008000">list</span>[<span style="color: #008000">object</span>]) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    l <span style="color: #666666">=</span> [<span style="color: #666666">1</span>, <span style="color: #666666">2</span>]  <span style="color: #3D7B7B; font-style: italic"># Infer type list[object] for [1, 2], not list[int]</span>
</code></pre></div>
<p>The value expression <code>[1, 2]</code> is type checked with the additional context that it is being assigned to a variable of type <code>list[object]</code>. This is used to infer the type of the <em>expression</em> as <code>list[object]</code>.</p>
<p>Declared argument types are also used for type context. In this program mypy knows that the empty list <code>[]</code> should have type <code>list[int]</code> based on the declared type of <code>arg</code> in <code>foo</code>:</p>
<div class="language-python highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">foo</span>(arg: <span style="color: #008000">list</span>[<span style="color: #008000">int</span>]) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    <span style="color: #008000">print</span>(<span style="color: #BA2121">&#39;Items:&#39;</span>, <span style="color: #BA2121">&#39;&#39;</span><span style="color: #666666">.</span>join(<span style="color: #008000">str</span>(a) <span style="color: #008000; font-weight: bold">for</span> a <span style="color: #AA22FF; font-weight: bold">in</span> arg))

foo([])  <span style="color: #3D7B7B; font-style: italic"># OK</span>
</code></pre></div>
<p>However, context only works within a single statement. Here mypy requires an annotation for the empty list, since the context would only be available in the following statement:</p>
<div class="language-python highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">foo</span>(arg: <span style="color: #008000">list</span>[<span style="color: #008000">int</span>]) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    <span style="color: #008000">print</span>(<span style="color: #BA2121">&#39;Items:&#39;</span>, <span style="color: #BA2121">&#39;, &#39;</span><span style="color: #666666">.</span>join(arg))

a <span style="color: #666666">=</span> []  <span style="color: #3D7B7B; font-style: italic"># Error: Need type annotation for &quot;a&quot;</span>
foo(a)
</code></pre></div>
<p>Working around the issue is easy by adding a type annotation:</p>
<div class="language-Python highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #666666">...</span>
a: <span style="color: #008000">list</span>[<span style="color: #008000">int</span>] <span style="color: #666666">=</span> []  <span style="color: #3D7B7B; font-style: italic"># OK</span>
foo(a)
</code></pre></div>
</div>
</div>
</div>
<h2 id="消除类型错误">消除类型错误<a class="headerlink" href="#消除类型错误" title="Permanent link">&para;</a></h2>
<div class="tabbed-set tabbed-alternate" data-tabs="6:2"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><input id="__tabbed_6_2" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">中文</label><label for="__tabbed_6_2">英文</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>您可能希望禁用特定行或代码库中特定文件内的类型检查。 为此，您可以使用 <code># type:ignore</code> 注释。</p>
<p>例如，在最新更新中，您使用的 Web 框架现在可以将整数参数传递给“run()”，从而在该端口上的本地主机上启动它。 就像这样：</p>
<div class="language-python highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># 启动应用程序 http://localhost:8000</span>
app<span style="color: #666666">.</span>run(<span style="color: #666666">8000</span>)
</code></pre></div>
<p>然而，开发人员忘记更新“run”的类型注释，因此 mypy 仍然认为“run”只需要“str”类型。 这会给你带来以下错误：</p>
<div class="language-text highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>error: Argument 1 to &quot;run&quot; of &quot;A&quot; has incompatible type &quot;int&quot;; expected &quot;str&quot;
</code></pre></div>
<p>如果您自己无法直接修复 Web 框架，您可以通过添加 <code># type:ignore</code> 来临时禁用该行的类型检查：</p>
<div class="language-python highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># 启动应用程序 http://localhost:8000</span>
app<span style="color: #666666">.</span>run(<span style="color: #666666">8000</span>)  <span style="color: #3D7B7B; font-style: italic"># type: ignore</span>
</code></pre></div>
<p>这将抑制该特定行上出现的任何 mypy 错误。</p>
<p>您可能应该在<code># type:ignore</code>注释上添加更多信息，以解释为什么首先添加忽略。 这可能是指向负责类型存根的存储库中的问题的链接，也可能是对该错误的简短解释。 为此，请使用以下格式：</p>
<div class="language-python highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># 启动应用程序 http://localhost:8000</span>
app<span style="color: #666666">.</span>run(<span style="color: #666666">8000</span>)  <span style="color: #3D7B7B; font-style: italic"># type: ignore  # `run()` in v2.0 accepts an `int`, as a port</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p><strong>Silencing type errors</strong></p>
<p>You might want to disable type checking on specific lines, or within specific files in your codebase. To do that, you can use a <code># type: ignore</code> comment.</p>
<p>For example, say in its latest update, the web framework you use can now take an integer argument to <code>run()</code>, which starts it on localhost on that port. Like so:</p>
<div class="language-python highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Starting app on http://localhost:8000</span>
app<span style="color: #666666">.</span>run(<span style="color: #666666">8000</span>)
</code></pre></div>
<p>However, the devs forgot to update their type annotations for <code>run</code>, so mypy still thinks <code>run</code> only expects <code>str</code> types. This would give you the following error:</p>
<div class="language-text highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>error: Argument 1 to &quot;run&quot; of &quot;A&quot; has incompatible type &quot;int&quot;; expected &quot;str&quot;
</code></pre></div>
<p>If you cannot directly fix the web framework yourself, you can temporarily disable type checking on that line, by adding a <code># type: ignore</code>:</p>
<div class="language-python highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Starting app on http://localhost:8000</span>
app<span style="color: #666666">.</span>run(<span style="color: #666666">8000</span>)  <span style="color: #3D7B7B; font-style: italic"># type: ignore</span>
</code></pre></div>
<p>This will suppress any mypy errors that would have raised on that specific line.</p>
<p>You should probably add some more information on the <code># type: ignore</code> comment, to explain why the ignore was added in the first place. This could be a link to an issue on the repository responsible for the type stubs, or it could be a short explanation of the bug. To do that, use this format:</p>
<div class="language-python highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Starting app on http://localhost:8000</span>
app<span style="color: #666666">.</span>run(<span style="color: #666666">8000</span>)  <span style="color: #3D7B7B; font-style: italic"># type: ignore  # `run()` in v2.0 accepts an `int`, as a port</span>
</code></pre></div>
</div>
</div>
</div>
<h3 id="输入忽略错误代码">输入忽略错误代码<a class="headerlink" href="#输入忽略错误代码" title="Permanent link">&para;</a></h3>
<div class="tabbed-set tabbed-alternate" data-tabs="7:2"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><input id="__tabbed_7_2" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="__tabbed_7_1">中文</label><label for="__tabbed_7_2">英文</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>默认情况下，mypy 显示每个错误的错误代码：</p>
<div class="language-text highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>error: &quot;str&quot; has no attribute &quot;trim&quot;  [attr-defined]
</code></pre></div>
<p>可以在忽略注释中添加特定的错误代码（例如 <code># type:ignore[attr-defined]</code>）以阐明正在沉默的内容。 您可以在<a href="https://mypy.readthedocs.io/en/stable/error_codes.html#silence-error-codes">此处`</a>找到有关错误代码的更多信息。</p>
</div>
<div class="tabbed-block">
<p><strong>Type ignore error codes</strong></p>
<p>By default, mypy displays an error code for each error:</p>
<div class="language-text highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>error: &quot;str&quot; has no attribute &quot;trim&quot;  [attr-defined]
</code></pre></div>
<p>It is possible to add a specific error-code in your ignore comment (e.g. <code># type: ignore[attr-defined]</code>) to clarify what's being silenced. You can find more information about error codes <a href="https://mypy.readthedocs.io/en/stable/error_codes.html#silence-error-codes"><code>here</code></a>.</p>
</div>
</div>
</div>
<h3 id="其他消除错误的方法">其他消除错误的方法<a class="headerlink" href="#其他消除错误的方法" title="Permanent link">&para;</a></h3>
<div class="tabbed-set tabbed-alternate" data-tabs="8:2"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><input id="__tabbed_8_2" name="__tabbed_8" type="radio" /><div class="tabbed-labels"><label for="__tabbed_8_1">中文</label><label for="__tabbed_8_2">英文</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>您可以通过使用“Any”动态键入特定变量来让 mypy 消除有关特定变量的错误。 有关更多信息，请参阅<a href="https://mypy.readthedocs.io/en/stable/dynamic_typing.html#dynamic-typing"><code>dynamic-typing</code></a>。</p>
<div class="language-python highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">typing</span> <span style="color: #008000; font-weight: bold">import</span> Any

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">f</span>(x: Any, y: <span style="color: #008000">str</span>) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    x <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;hello&#39;</span>
    x <span style="color: #666666">+=</span> <span style="color: #666666">1</span>  <span style="color: #3D7B7B; font-style: italic"># OK</span>
</code></pre></div>
<p>您可以通过在文件顶部添加 <code># mypy:ignore-errors</code> 来忽略文件中的所有 mypy 错误：</p>
<div class="language-python highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># mypy: ignore-errors</span>
<span style="color: #3D7B7B; font-style: italic"># 这是一个测试文件，跳过其中的类型检查。</span>
<span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">unittest</span>
<span style="color: #666666">...</span>
</code></pre></div>
<p>您还可以在 <a href="https://mypy.readthedocs.io/en/stable/config_file.html#config-file"><code>mypy 配置文件</code></a> 中指定每个模块的配置选项。 例如：</p>
<div class="language-ini highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Don&#39;t report errors in the &#39;package_to_fix_later&#39; package</span>
<span style="color: #008000; font-weight: bold">[mypy-package_to_fix_later.*]</span>
<span style="color: #687822">ignore_errors</span><span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span><span style="color: #BA2121">True</span>

<span style="color: #3D7B7B; font-style: italic"># Disable specific error codes in the &#39;tests&#39; package</span>
<span style="color: #3D7B7B; font-style: italic"># Also don&#39;t require type annotations</span>
<span style="color: #008000; font-weight: bold">[mypy-tests.*]</span>
<span style="color: #687822">disable_error_code</span><span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span><span style="color: #BA2121">var-annotated, has-type</span>
<span style="color: #687822">allow_untyped_defs</span><span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span><span style="color: #BA2121">True</span>

<span style="color: #3D7B7B; font-style: italic"># Silence import errors from the &#39;library_missing_types&#39; package</span>
<span style="color: #008000; font-weight: bold">[mypy-library_missing_types.*]</span>
<span style="color: #687822">ignore_missing_imports</span><span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span><span style="color: #BA2121">True</span>
</code></pre></div>
<p>Finally, adding a <code>@typing.no_type_check</code> decorator to a class, method or
function causes mypy to avoid type checking that class, method or function
and to treat it as not having any type annotations.</p>
<div class="language-python highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #AA22FF">@typing</span><span style="color: #666666">.</span>no_type_check
<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">foo</span>() <span style="color: #666666">-&gt;</span> <span style="color: #008000">str</span>:
   <span style="color: #008000; font-weight: bold">return</span> <span style="color: #666666">12345</span>  <span style="color: #3D7B7B; font-style: italic"># No error!</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p><strong>Other ways to silence errors</strong></p>
<p>You can get mypy to silence errors about a specific variable by dynamically typing it with <code>Any</code>. See <a href="https://mypy.readthedocs.io/en/stable/dynamic_typing.html#dynamic-typing"><code>dynamic-typing</code></a> for more information.</p>
<div class="language-python highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">typing</span> <span style="color: #008000; font-weight: bold">import</span> Any

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">f</span>(x: Any, y: <span style="color: #008000">str</span>) <span style="color: #666666">-&gt;</span> <span style="color: #008000; font-weight: bold">None</span>:
    x <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;hello&#39;</span>
    x <span style="color: #666666">+=</span> <span style="color: #666666">1</span>  <span style="color: #3D7B7B; font-style: italic"># OK</span>
</code></pre></div>
<p>You can ignore all mypy errors in a file by adding a <code># mypy: ignore-errors</code> at the top of the file:</p>
<div class="language-python highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># mypy: ignore-errors</span>
<span style="color: #3D7B7B; font-style: italic"># This is a test file, skipping type checking in it.</span>
<span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">unittest</span>
<span style="color: #666666">...</span>
</code></pre></div>
<p>You can also specify per-module configuration options in your <a href="https://mypy.readthedocs.io/en/stable/config_file.html#config-file"><code>The mypy configuration file</code></a>. For example:</p>
<div class="language-ini highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Don&#39;t report errors in the &#39;package_to_fix_later&#39; package</span>
<span style="color: #008000; font-weight: bold">[mypy-package_to_fix_later.*]</span>
<span style="color: #687822">ignore_errors</span><span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span><span style="color: #BA2121">True</span>

<span style="color: #3D7B7B; font-style: italic"># Disable specific error codes in the &#39;tests&#39; package</span>
<span style="color: #3D7B7B; font-style: italic"># Also don&#39;t require type annotations</span>
<span style="color: #008000; font-weight: bold">[mypy-tests.*]</span>
<span style="color: #687822">disable_error_code</span><span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span><span style="color: #BA2121">var-annotated, has-type</span>
<span style="color: #687822">allow_untyped_defs</span><span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span><span style="color: #BA2121">True</span>

<span style="color: #3D7B7B; font-style: italic"># Silence import errors from the &#39;library_missing_types&#39; package</span>
<span style="color: #008000; font-weight: bold">[mypy-library_missing_types.*]</span>
<span style="color: #687822">ignore_missing_imports</span><span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span><span style="color: #BA2121">True</span>
</code></pre></div>
<p>Finally, adding a <code>@typing.no_type_check</code> decorator to a class, method or
function causes mypy to avoid type checking that class, method or function
and to treat it as not having any type annotations.</p>
<div class="language-python highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #AA22FF">@typing</span><span style="color: #666666">.</span>no_type_check
<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">foo</span>() <span style="color: #666666">-&gt;</span> <span style="color: #008000">str</span>:
   <span style="color: #008000; font-weight: bold">return</span> <span style="color: #666666">12345</span>  <span style="color: #3D7B7B; font-style: italic"># No error!</span>
</code></pre></div>
</div>
</div>
</div>

  <hr>
<div class="md-source-file">
  <small>
    
      最后更新:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">2024年9月4日</span>
      
        <br>
        创建日期:
        <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">2024年9月4日</span>
      
    
  </small>
</div>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["header.autohide", "navigation.top", "navigation.tabs", "navigation.tabs.sticky", "navigation.path", "content.tabs.link", "content.code.copy", "content.tooltips", "navigation.indexes", "navigation.prune", "navigation.instant"], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.94c44541.min.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>